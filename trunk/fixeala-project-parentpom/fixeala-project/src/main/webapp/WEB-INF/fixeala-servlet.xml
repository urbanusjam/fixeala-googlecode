<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:context="http://www.springframework.org/schema/context"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:mvc="http://www.springframework.org/schema/mvc" 
	xmlns:p="http://www.springframework.org/schema/p" 
	xsi:schemaLocation="
        http://www.springframework.org/schema/beans     
        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/context 
        http://www.springframework.org/schema/context/spring-context-3.1.xsd
        http://www.springframework.org/schema/mvc
        http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd ">
        
    <!-- support JSR303 annotation if JSR 303 validation present on classpath -->
	<mvc:annotation-driven />
	
 	<mvc:resources mapping="/resources/**" location="/resources/" />
 
	<!--	Controllers       -->	
	<context:component-scan base-package="ar.com.urbanusjam.web" />
	

	<!--	Context           -->	
	<import resource="classpath:ctx/fixeala-context.xml" />
	
	
	<!-- Configure the multipart resolver -->
    <bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver"
        p:maxUploadSize="3000000"/> <!-- the maximum file size in bytes (3MB) -->

	<!-- JSP View Resolver -->	
	<bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
<!--    		<property name="viewClass" value="org.springframework.web.servlet.view.JstlView" /> -->
	    <property name="prefix" value="/pages/" />
	    <property name="suffix" value=".jsp" />	
	    <property name="order" value="1" />
	</bean>

	<!-- Default Tiles View Resolver -->	
 	<bean id="tilesViewResolver" class="org.springframework.web.servlet.view.UrlBasedViewResolver" >
   		<property name="viewClass" value="org.springframework.web.servlet.view.tiles2.TilesView"/> 
 	 <property name="order" value="0" />
 	</bean> 

 	<bean id="tilesConfigurer" class="org.springframework.web.servlet.view.tiles2.TilesConfigurer" >
   		<property name="definitions">
	    	<list>
	        	<value>/WEB-INF/tiles.xml</value>
	     	</list>
   		</property>
 	</bean>
	
	<bean id="jacksonMessageConverter" class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter"></bean>
 		<bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">
			<property name="messageConverters">
				  <list>
				    <ref bean="jacksonMessageConverter"/>
				  </list>
			</property>
	</bean>
	

<!-- 	Application Message Bundle -->
	<bean id="messageSource" class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
		<property name="basename" value="/messages/fixeala.messages" />		
	</bean>
	
	<bean id="validator"
      	class="org.springframework.validation.beanvalidation.LocalValidatorFactoryBean"/>
      
</beans>